!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SVGSaver=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n={},o={},r={},i={};Object.defineProperty(i,"__esModule",{value:!0}),i.getFilename=i.isDefined=i.isFunction=void 0;i.isFunction=function(e){return"function"==typeof e};i.isDefined=function(e){return void 0!==e},i.getFilename=function(e,t,n){var o;return n&&""!==n||(n=(null!==(o=e.getAttribute("title"))&&void 0!==o?o:"untitled")+"."+t),encodeURI(n)};var a=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function u(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((o=o.apply(e,t||[])).next())}))},u=e&&e.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.saveBlob=r.savePNG=r.loadCanvasImage=r.saveDataURL=void 0;var l=i;function c(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.dispatchEvent(new MouseEvent("click"))}function s(e){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,new Promise((function(t){var n=document.createElement("canvas"),o=n.getContext("2d"),r=new Image;r.onload=function(){n.width=r.width,n.height=r.height,o.drawImage(r,0,0),t(n)},r.src=e}))]}))}))}function f(e,t){c(URL.createObjectURL(e),t)}r.saveDataURL=c,r.loadCanvasImage=s,r.savePNG=function(e,t){return a(this,void 0,void 0,(function(){var n;return u(this,(function(o){switch(o.label){case 0:return[4,s(e)];case 1:return n=o.sent(),(0,l.isDefined)(n.toBlob)?n.toBlob((function(e){f(e,t)})):c(n.toDataURL("image/png"),t),[2]}}))}))},r.saveBlob=f;var d=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function u(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((o=o.apply(e,t||[])).next())}))},v=e&&e.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SVGSaver=void 0;var p=r,h=i,b=function(){function e(e){this.svg=e}return e.prototype.getSVG=function(){var e=this.svg.outerHTML;return e||(new window.XMLSerializer).serializeToString(this.svg)},e.prototype.getSVGBlob=function(){var e=this.getSVG();return new Blob([e],{type:"text/xml"})},e.prototype.getSVGDataURL=function(){var e=encodeURIComponent(this.getSVG());return(0,h.isDefined)(window.btoa)?"data:image/svg+xml;base64,"+window.btoa(unescape(e)):"data:image/svg+xml,"+e},e.prototype.saveAsSVG=function(e){var t=(0,h.getFilename)(this.svg,e,"svg");(0,h.isFunction)(Blob)&&(0,p.saveBlob)(this.getSVGBlob(),t),(0,p.saveDataURL)(this.getSVGDataURL(),t)},e.prototype.getPNGDataURL=function(){return d(this,void 0,void 0,(function(){return v(this,(function(e){switch(e.label){case 0:return[4,(0,p.loadCanvasImage)(this.getSVGDataURL())];case 1:return[2,e.sent().toDataURL("image/png")]}}))}))},e.prototype.getPNGBlob=function(){return d(this,void 0,void 0,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return[4,(0,p.loadCanvasImage)(this.getSVGDataURL())];case 1:return e=t.sent(),[2,new Promise((function(t){e.toBlob(t,"image/png")}))]}}))}))},e.prototype.saveAsPNG=function(e){return d(this,void 0,void 0,(function(){var t;return v(this,(function(n){switch(n.label){case 0:return t=(0,h.getFilename)(this.svg,e,"png"),[4,(0,p.savePNG)(this.getSVGDataURL(),t)];case 1:return n.sent(),[2]}}))}))},e}();return o.SVGSaver=b,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SVGSaver=void 0;var t=o;Object.defineProperty(e,"SVGSaver",{enumerable:!0,get:function(){return t.SVGSaver}})}(n),t(n)}));
