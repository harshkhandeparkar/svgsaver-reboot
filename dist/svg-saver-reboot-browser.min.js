!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SVGSaver=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n={},o={},r={},i=e&&e.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(r,"__esModule",{value:!0}),r.SVGAllowedAttrs=r.SVGAllowedStyles=void 0,r.SVGAllowedStyles={"alignment-baseline":"auto","baseline-shift":"baseline",clip:"auto","clip-path":"none","clip-rule":"nonzero",color:"rgb(51, 51, 51)","color-interpolation":"srgb","color-interpolation-filters":"linearrgb","color-profile":"auto","color-rendering":"auto",cursor:"auto",direction:"ltr",display:"inline","dominant-baseline":"auto","enable-background":"",fill:"rgb(0, 0, 0)","fill-opacity":"1","fill-rule":"nonzero",filter:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"","font-family":"normal","font-size":"medium","font-size-adjust":"auto","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"400","glyph-orientation-horizontal":"0deg","glyph-orientation-vertical":"auto","image-rendering":"auto",kerning:"auto","letter-spacing":"0","lighting-color":"rgb(255, 255, 255)",marker:"","marker-end":"none","marker-mid":"none","marker-start":"none",mask:"none",opacity:"1",overflow:"visible","paint-order":"fill","pointer-events":"auto","shape-rendering":"auto","stop-color":"rgb(0, 0, 0)","stop-opacity":"1",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-anchor":"start","text-decoration":"none","text-rendering":"auto","unicode-bidi":"normal",visibility:"visible","word-spacing":"0px","writing-mode":"lr-tb"};r.SVGAllowedAttrs=i(i([],["id","xml: base","xml: lang","xml: space","height","result","width","x","y","xlink: href","href","style","class","d","pathLength","x","y","dx","dy","glyphRef","format","x1","y1","x2","y2","rotate","textLength","cx","cy","r","rx","ry","fx","fy","width","height","refX","refY","orient","markerUnits","markerWidth","markerHeight","maskUnits","transform","viewBox","version","preserveAspectRatio","xmlns","points","offset","xlink:href"],!0),["clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","fill","fill-opacity","fill-rule","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","marker","marker-end","marker-mid","marker-start","pointer-events","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-rendering","transform","visibility","white-space","word-spacing","writing-mode"],!0);var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.cloneSVG=void 0;var l=r;function s(e,t,n,o){n(e,t);for(var r=e.childNodes,i=0;i<r.length;i++)s(r[i],t.childNodes[i],n,o);o(e,t)}a.cloneSVG=function(e,t,n){var o=e.cloneNode(!0);return s(e,o,(function(e,t){t.style&&function(e,t,n){var o,r=document.defaultView.getComputedStyle(e);for(var i in n)t.style.setProperty(i,null!==(o=r[i])&&void 0!==o?o:n[i])}(e,t,n)}),(function(e,o){o.style&&o.parentNode&&function(e,t){t=null!=t?t:e.parentElement.style,l.SVGAllowedAttrs.forEach((function(n){e.style[n]===t[n]&&e.style.removeProperty(n)}))}(o),o.attributes&&function(e,t,n){if(0!==t.length)for(var o=0;o<e.attributes.length;o++){var r=e.attributes.item(o);Object.keys(n).includes(r.name)&&t.includes(r.name)||e.removeAttribute(r.name)}}(o,t,n)})),o};var u={},c={};Object.defineProperty(c,"__esModule",{value:!0}),c.getFilename=c.isDefined=c.isFunction=void 0;c.isFunction=function(e){return"function"==typeof e};c.isDefined=function(e){return void 0!==e},c.getFilename=function(e,t,n){var o;return n&&""!==n||(n=(null!==(o=e.getAttribute("title"))&&void 0!==o?o:"untitled")+"."+t),encodeURI(n)};var f=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},d=e&&e.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};Object.defineProperty(u,"__esModule",{value:!0}),u.saveBlob=u.savePNG=u.loadCanvasImage=u.saveDataURL=void 0;var p=c;function h(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.dispatchEvent(new MouseEvent("click"))}function v(e){return f(this,void 0,void 0,(function(){return d(this,(function(t){return[2,new Promise((function(t){var n=document.createElement("canvas"),o=n.getContext("2d"),r=new Image;r.onload=function(){n.width=r.width,n.height=r.height,o.drawImage(r,0,0),t(n)},r.src=e}))]}))}))}function g(e,t){h(URL.createObjectURL(e),t)}u.saveDataURL=h,u.loadCanvasImage=v,u.savePNG=function(e,t){return f(this,void 0,void 0,(function(){var n;return d(this,(function(o){switch(o.label){case 0:return[4,v(e)];case 1:return n=o.sent(),(0,p.isDefined)(n.toBlob)?n.toBlob((function(e){g(e,t)})):h(n.toDataURL("image/png"),t),[2]}}))}))},u.saveBlob=g;var y=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function l(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},b=e&&e.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SVGSaver=void 0;var m=r,w=a,S=u,k=c,x=function(){function e(e){this.loadNewSVG(e)}return e.prototype.loadNewSVG=function(e){this.svg=(0,w.cloneSVG)(e,m.SVGAllowedAttrs,m.SVGAllowedStyles)},e.prototype.getSVG=function(){var e=this.svg.outerHTML;return e||(new window.XMLSerializer).serializeToString(this.svg)},e.prototype.getSVGBlob=function(){var e=this.getSVG();return new Blob([e],{type:"text/xml"})},e.prototype.getSVGDataURL=function(){var e=encodeURIComponent(this.getSVG());return(0,k.isDefined)(window.btoa)?"data:image/svg+xml;base64,"+window.btoa(unescape(e)):"data:image/svg+xml,"+e},e.prototype.saveAsSVG=function(e){var t=(0,k.getFilename)(this.svg,e,"svg");(0,k.isFunction)(Blob)&&(0,S.saveBlob)(this.getSVGBlob(),t),(0,S.saveDataURL)(this.getSVGDataURL(),t)},e.prototype.getPNGDataURL=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,(0,S.loadCanvasImage)(this.getSVGDataURL())];case 1:return[2,e.sent().toDataURL("image/png")]}}))}))},e.prototype.getPNGBlob=function(){return y(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,(0,S.loadCanvasImage)(this.getSVGDataURL())];case 1:return e=t.sent(),[2,new Promise((function(t){e.toBlob(t,"image/png")}))]}}))}))},e.prototype.saveAsPNG=function(e){return y(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return t=(0,k.getFilename)(this.svg,e,"png"),[4,(0,S.savePNG)(this.getSVGDataURL(),t)];case 1:return n.sent(),[2]}}))}))},e}();return o.SVGSaver=x,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SVGSaver=void 0;var t=o;Object.defineProperty(e,"SVGSaver",{enumerable:!0,get:function(){return t.SVGSaver}})}(n),t(n)}));
