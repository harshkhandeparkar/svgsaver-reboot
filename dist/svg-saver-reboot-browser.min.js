!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SVGSaver=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n={},o={},r={};Object.defineProperty(r,"__esModule",{value:!0}),r.SVGAllowedAttrs=r.SVGAllowedStyles=void 0,r.SVGAllowedStyles={"alignment-baseline":"auto","baseline-shift":"baseline",clip:"auto","clip-path":"none","clip-rule":"nonzero",color:"rgb(51, 51, 51)","color-interpolation":"srgb","color-interpolation-filters":"linearrgb","color-profile":"auto","color-rendering":"auto",cursor:"auto",direction:"ltr",display:"inline","dominant-baseline":"auto","enable-background":"",fill:"rgb(0, 0, 0)","fill-opacity":"1","fill-rule":"nonzero",filter:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"","font-family":"normal","font-size":"medium","font-size-adjust":"auto","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"400","glyph-orientation-horizontal":"0deg","glyph-orientation-vertical":"auto","image-rendering":"auto",kerning:"auto","letter-spacing":"0","lighting-color":"rgb(255, 255, 255)",marker:"","marker-end":"none","marker-mid":"none","marker-start":"none",mask:"none",opacity:"1",overflow:"visible","paint-order":"fill","pointer-events":"auto","shape-rendering":"auto","stop-color":"rgb(0, 0, 0)","stop-opacity":"1",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-anchor":"start","text-decoration":"none","text-rendering":"auto","unicode-bidi":"normal",visibility:"visible","word-spacing":"0px","writing-mode":"lr-tb"};r.SVGAllowedAttrs=["id","xml: base","xml: lang","xml: space","height","result","width","x","y","xlink: href","href","style","class","d","pathLength","x","y","dx","dy","glyphRef","format","x1","y1","x2","y2","rotate","textLength","cx","cy","r","rx","ry","fx","fy","width","height","refX","refY","orient","markerUnits","markerWidth","markerHeight","maskUnits","transform","viewBox","version","preserveAspectRatio","xmlns","points","offset","xlink:href"];var i={};Object.defineProperty(i,"__esModule",{value:!0}),i.cloneSVG=void 0;var a=r;function l(e,t,n,o){n(e,t);for(var r=e.childNodes,i=0;i<r.length;i++)l(r[i],t.childNodes[i],n,o);o(e,t)}i.cloneSVG=function(e,t,n){var o=e.cloneNode(!0);return l(e,o,(function(e,t){t.style&&function(e,t,n){var o,r=document.defaultView.getComputedStyle(e);for(var i in n)t.style.setProperty(i,null!==(o=r[i])&&void 0!==o?o:n[i])}(e,t,n)}),(function(e,o){o.style&&o.parentNode&&function(e,t){t=null!=t?t:e.parentElement.style,a.SVGAllowedAttrs.forEach((function(n){e.style[n]===t[n]&&e.style.removeProperty(n)}))}(o),o.attributes&&function(e,t,n){if(0!==t.length)for(var o=0;o<e.attributes.length;o++){var r=e.attributes.item(o);Object.keys(n).includes(r.name)||t.includes(r.name)||e.removeAttribute(r.name)}}(o,t,n)})),o};var u={},s={};Object.defineProperty(s,"__esModule",{value:!0}),s.getFilename=s.isDefined=s.isFunction=void 0;s.isFunction=function(e){return"function"==typeof e};s.isDefined=function(e){return void 0!==e},s.getFilename=function(e,t){var n=(null!=t?t:"image").split(".");return(n.length>1?n.slice(0,-1):n).join(".")+".".concat(e)};var c=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function l(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((o=o.apply(e,t||[])).next())}))},f=e&&e.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&l[0]?o.return:l[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,l[1])).done)return r;switch(o=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,o=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){a.label=l[1];break}if(6===l[0]&&a.label<r[1]){a.label=r[1],r=l;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(l);break}r[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],o=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(u,"__esModule",{value:!0}),u.saveBlob=u.savePNG=u.loadCanvasImage=u.saveDataURL=void 0;var d=s;function p(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.click()}function v(e){return c(this,void 0,void 0,(function(){return f(this,(function(t){return[2,new Promise((function(t){var n=document.createElement("canvas"),o=n.getContext("2d"),r=new Image;r.addEventListener("load",(function(){n.width=r.width,n.height=r.height,o.drawImage(r,0,0),t(n)})),r.addEventListener("error",(function(e){console.log("img load error",e)})),r.src=e}))]}))}))}function h(e,t){p(URL.createObjectURL(e),t)}u.saveDataURL=p,u.loadCanvasImage=v,u.savePNG=function(e,t){return c(this,void 0,void 0,(function(){var n;return f(this,(function(o){switch(o.label){case 0:return[4,v(e)];case 1:return n=o.sent(),(0,d.isDefined)(n.toBlob)?n.toBlob((function(e){h(e,t)})):p(n.toDataURL("image/png"),t),[2]}}))}))},u.saveBlob=h;var g=e&&e.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function l(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((o=o.apply(e,t||[])).next())}))},y=e&&e.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&l[0]?o.return:l[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,l[1])).done)return r;switch(o=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,o=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){a.label=l[1];break}if(6===l[0]&&a.label<r[1]){a.label=r[1],r=l;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(l);break}r[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],o=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SVGSaver=void 0;var b=r,m=i,w=u,S=s,x=function(){function e(e){this.loadNewSVG(null!=e?e:document.createElementNS("http://www.w3.org/2000/svg","svg"))}return e.prototype.loadNewSVG=function(e){this.svg=(0,m.cloneSVG)(e,b.SVGAllowedAttrs,b.SVGAllowedStyles),this.svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg")},e.prototype.getSVG=function(){return(new XMLSerializer).serializeToString(this.svg)},e.prototype.getSVGBlob=function(){var e=this.getSVG();return new Blob([e],{type:"image/svg+xml;charset=utf-8"})},e.prototype.getSVGDataURL=function(){return"data:image/svg+xml;base64,"+btoa(this.getSVG())},e.prototype.saveAsSVG=function(e){var t=(0,S.getFilename)("svg",e);(0,w.saveDataURL)(this.getSVGDataURL(),t)},e.prototype.getPNGDataURL=function(){return g(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,(0,w.loadCanvasImage)(this.getSVGDataURL())];case 1:return[2,e.sent().toDataURL("image/png")]}}))}))},e.prototype.getPNGBlob=function(){return g(this,void 0,void 0,(function(){var e;return y(this,(function(t){switch(t.label){case 0:return[4,(0,w.loadCanvasImage)(this.getSVGDataURL())];case 1:return e=t.sent(),[2,new Promise((function(t){e.toBlob(t,"image/png")}))]}}))}))},e.prototype.saveAsPNG=function(e){return g(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return t=(0,S.getFilename)("png",e),[4,(0,w.savePNG)(this.getSVGDataURL(),t)];case 1:return n.sent(),[2]}}))}))},e}();return o.SVGSaver=x,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SVGSaver=void 0;var t=o;Object.defineProperty(e,"SVGSaver",{enumerable:!0,get:function(){return t.SVGSaver}})}(n),t(n)}));
